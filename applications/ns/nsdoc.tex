%<*>---<*>---<*>---<*>---<*>---<*>---<*>---<*>---<*>---<*>---<*> 
%section rotary_save
\label{sec:rotary_save}
Sometimes it is interesting to save the state vector with a certain
frequency in a ``append'' manner, i.e. appending the state vector at
the end of the file. However, this posses the danger of storing too
much amount of data if the user performs a very long run. The ``rotary
save'' mechanism allows writing only a certain amount of the recent
states. The mechanism basically saves the state vector each
\verb+nsaverot+ steps appending to the a file. The name of the file is
contructed from a pattern set by the user via the
\verb+save_file_pattern+ entry, by replacing \verb+%d+ 
by \verb+0+ ``\`a la'' \verb+printf()+. For instance, if
\verb+save_file_pattern+ i set to \verb+file%d.out+ 
then the state vectors are appended to \verb+file0.out+.  When the
number of written states reach the \verb+nrec+ count, the file is
reset to 0, and the saving continues from the start of the
file. However, if \verb+nfile+ is greater than one, then the state
vector are continued to be stored in file \verb+file1.out+ and so
on. When the number of files \verb+nfile+ is reached, the saving
continues in file '0'.

More precisely, the saving mechanism is described by the following
pseudo-code:

\begin{algorithmic}
\STATE read state vector from \verb+initial_state+ file into $x^0$, $n\gets 0$.
\FOR{$i$=0 to {\tt nstep}}
  \STATE advance $x^n$ to $x^{n+1}$.
  \IF{$n$ \% {\tt nsaverot} == 0}
    \STATE $j \gets n$/{\tt nsaverot}
    \STATE $k \gets j$ \% {\tt nrec}
    \STATE $l \gets j$/{\tt nrec}
    \IF{$k=0$}\STATE rewind file $l$ \ENDIF
    \STATE append state vector to file $l$
  \ENDIF
\ENDFOR
\end{algorithmic}
%end_section

%<*>---<*>---<*>---<*>---<*>---<*>---<*>---<*>---<*>---<*>---<*> 
%section print_some
\label{sec:print_some}
The ``print some'' mechanism allows the user to store the variables of
some set of nodes with some frequency. The nodes are entered in a
separate file whose name is given by a \verb+print_some_file+ entry in
the general options, one node per line. The entry \verb+nsome+
indicates the frequency (in steps) at which the data is saved and
\verb+save_file_some+ the name of the file to save in. 
%end_section
