 # $Id: Makefile,v 1.2 2001/01/02 16:50:26 mstorti Exp $ 

.PHONY: all run lclean save compile

PROG = adv
PETSCFEM_DIR   = ../..
MYOBJS = advective.o advecfm2.o adv.o absorb.o \
		ffshallw.o ffadvec.o ffeulerfm2.o \
		ffswfm2.o ffswfm2t.o bcconv_adv.o ffeuler.o bccadvfm2.o 
TAGFLAGS = $(TAGINCL)="../../src/TAGS"
#TAGFLAGS = --include="../../src/TAGS"

SRCS := $(MYOBJS:.o=.cpp)

include $(PETSCFEM_DIR)/Makefile.base

compile: $(PROG).bin

%.cppi: %.cpp
	g++ $(CPPFLAGS) -I /usr/local/mpich-1.2.0/include/ \
		-I/home/mstorti/PETSC/petsc-2.0.24/bmake/linux/ \
		-I/home/mstorti/PETSC/petsc-2.0.24/include/ -E $< > $@

ffeuler.o: ffeuler.cpp
	-${CC} -c ${COPTFLAGS} ${CFLAGS} ${CCPPFLAGS} -O0 $<

# documentation of options with the script `odoc.pl'
odocadv: ../../doc/odocadv.tex  ../../doc/odocadve.tex \
	../../doc/odocadvfe.tex ../../doc/odocadvfs.tex 

../../doc/odocadv.tex: adv.cpp
	$(run_odoc)

../../doc/odocadve.tex: advecfm2.cpp
	$(run_odoc)

../../doc/odocadvfe.tex: ffeulerfm2.cpp
	$(run_odoc)

../../doc/odocadvfs.tex: ffswfm2.cpp
	$(run_odoc)

# $(PROG).bin: $(MYOBJS) $(LIBPETSCFEM)
# 	-rm $(PROG).bin
# 	${CXX_CLINKER} -o $(PROG).bin $(MYOBJS) \
# 		-L../../src -lpetscfem \
#                 -L$(METIS) -L/usr/local/lib \
#                 -lmetis  -L$(NEWMAT)  -lnewmat \
# 		-lglib -L$(LIBRETTO_LIB) -libretto \
# 		-lc ${PETSC_SLES_LIB} \
# 		$(MESCHACH)/libmes.a

lclean: general_clean
#	$(MAKE) -C $(PETSCFEM_DIR) lclean
#	-rm *.o $(OBJS) $(PROG).bin octave-core *.cppi makefile.d *~
#	$(MAKE) clean

# Automatically generated dependency file. Generated by makedepend.
#
