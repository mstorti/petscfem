# -*- mode: shell-script -*-
#
#===========================================================
global_options

use_log_vars 0

# SUPG conf
weak_form 0

# time stepping
nnwt 3
nstep 500
#nstep 1
alpha 1

steady 0

initial_state "canal1d.ini"
#initial_state "outvector.out"

# "rotary saving" 
nsaverot 1
nfile 1
nrec 1000
save_file_pattern "canal1d%d.out"
# omega_newton 0.3
tol_newton 0
# solver "iisd"
#preco_type "jacobi"
solver "petsc"
preco_type "lu"

# print_linear_system_and_stop
# solve_system 0
# time_step_stop 25
# inwt_stop 2

# convergence parameters. Internal GMRES loop. 
rtol 0
atol 0
dtol 1e10
maxits 1
Krylov_dim 100
# print_internal_loop_conv 1
Dt 0.05
tau_fac 0.

__END_HASH__

# ndim nu ndof
nodes   2  3  2
__INCLUDE__ canal1d.nod

__END_NODES__


#===========================================================
table physical_data
gravity 1.

friction_law "Chezy"
Ch 110.

shape "rectangular"
width 10.
#shape "circular"
#radius 10.

#shape "triangular"
#width 30.
#height 3.

#angle in radians
#wall_angle 0.1
cfric 0.
ndim 2
__END_HASH__

#===========================================================
elemset streamsw1d 2
#elemset id 2
geometry cartesian1d
npg 2
_table_include physical_data
#id_fac 0.
__END_HASH__
__INCLUDE__ canal1d.con
__END_ELEMSET__

#===========================================================
#elemset id 1
#id_fac 0.
#__END_HASH__
#102
#__END_ELEMSET__

#===========================================================

elemset streamsw1d_abso 5
geometry cartesian1d
lagrange_diagonal_factor 1.e-6
lagrange_residual_factor 1.0
props U_ref[2] normaln[1]
_table_include physical_data
__END_HASH__
__INCLUDE__ canal1d.rest
__END_ELEMSET__

end_elemsets

#fixa
#__INCLUDE__ canal1d.fixa
#__END_FIXA__

#constraint
#__INCLUDE__ canal1d.const
#__END_CONSTRAINT__

